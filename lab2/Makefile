# Компилятор C++
CXX = g++

# -O2: уровень оптимизации 2 для улучшения производительности
CXXFLAGS = -std=c++11 -O2

# Указываем исходные файлы проекта
SRCS = main.cpp ThreadPool.cpp

# Указываем заголовочные файлы проекта
HEADERS = ThreadPool.hpp

# Список объектных файлов на основе исходных файлов
# Заменяем расширение .cpp на .o
OBJS = $(SRCS:.cpp=.o)

# Имя исполняемого файла
TARGET = lab2

# Основная цель сборки
all: $(TARGET)

# Правило для создания исполняемого файла из объектных файлов
$(TARGET): $(OBJS)
	# Компилируем объектные файлы в исполняемый файл
	$(CXX) $(CXXFLAGS) -o $@ $^

# Правило для компиляции каждого исходного файла в объектный файл
%.o: %.cpp $(HEADERS)
	# Компилируем .cpp файл в .o файл
	$(CXX) $(CXXFLAGS) -c $<

# Правило для удаления объектных файлов после сборки
clean:
	# Удаляем все объектные файлы
	rm -f $(OBJS)
	# Удаляем файл программы 
	rm -f ./lab2 

.PHONY: all clean